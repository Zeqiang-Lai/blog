<!DOCTYPE html>
<html lang="zh" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="å…³äº DDIM é‡‡æ ·ç®—æ³•çš„æ¨å¯¼" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zeqiang-lai.github.io/blog/posts/ai/ddim/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-11-06T20:16:05+08:00" />

<title>å…³äº DDIM é‡‡æ ·ç®—æ³•çš„æ¨å¯¼ | Ze&#39;s Blog</title>
<link rel="manifest" href="/blog/manifest.json">
<link rel="icon" href="/blog/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/blog/book.min.6462353533c3f762fe6bb5be03366e305f85746754362ee2d02d32045005eef6.css" integrity="sha256-ZGI1NTPD92L&#43;a7W&#43;AzZuMF&#43;FdGdUNi7i0C0yBFAF7vY=" crossorigin="anonymous">
  <script defer src="/blog/flexsearch.min.js"></script>
  <script defer src="/blog/zh.search.min.42d7513296b5641b11c535fe61997fe7bf7bc4dc5e2aaf0e15de13ff08b1f69c.js" integrity="sha256-QtdRMpa1ZBsRxTX&#43;YZl/5797xNxeKq8OFd4T/wix9pw=" crossorigin="anonymous"></script>

  <script defer src="/blog/sw.min.f4bc4151631c92d29816d24dfaacb947aa6b03f91ec1c0cd2738ba8957d04791.js" integrity="sha256-9LxBUWMcktKYFtJN&#43;qy5R6prA/kewcDNJzi6iVfQR5E=" crossorigin="anonymous"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-7KXWQ22DHN"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-7KXWQ22DHN', { 'anonymize_ip': false });
}
</script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  <link href="/blog/font-awesome/css/fontawesome.css" rel="stylesheet">
<link href="/blog/font-awesome/css/brands.css" rel="stylesheet">
<link href="/blog/font-awesome/css/solid.css" rel="stylesheet">

<style type="text/css" media="screen">
    @media (prefers-color-scheme: dark) { 
      /* Background */ .chroma { color: #1f1f24 }
/* Other */ .chroma .x { color: #ffffff }
/* Error */ .chroma .err { color: #960050 }
/* LineTableTD */ .chroma .lntd { vertical-align: top; padding: 0; margin: 0; border: 0;color: #ffffff }
/* LineTable */ .chroma .lntable { border-spacing: 0; padding: 0; margin: 0; border: 0; width: auto; overflow: auto; display: block;color: #ffffff }
/* LineHighlight */ .chroma .hl { display: block; width: 100%;color: #ffffff; background-color: #ffffcc }
/* LineNumbersTable */ .chroma .lnt { margin-right: 0.4em; padding: 0 0.4em 0 0.4em;color: #8f8f91 }
/* LineNumbers */ .chroma .ln { margin-right: 0.4em; padding: 0 0.4em 0 0.4em;color: #8f8f91 }
/* Keyword */ .chroma .k { color: #fc5fa3 }
/* KeywordConstant */ .chroma .kc { color: #fc5fa3 }
/* KeywordDeclaration */ .chroma .kd { color: #fc5fa3 }
/* KeywordNamespace */ .chroma .kn { color: #fc5fa3 }
/* KeywordPseudo */ .chroma .kp { color: #fc5fa3 }
/* KeywordReserved */ .chroma .kr { color: #fc5fa3 }
/* KeywordType */ .chroma .kt { color: #fc5fa3 }
/* Name */ .chroma .n { color: #ffffff }
/* NameAttribute */ .chroma .na { color: #ffffff }
/* NameBuiltin */ .chroma .nb { color: #d0a8ff }
/* NameBuiltinPseudo */ .chroma .bp { color: #a167e6 }
/* NameClass */ .chroma .nc { color: #5dd8ff }
/* NameConstant */ .chroma .no { color: #ffffff }
/* NameDecorator */ .chroma .nd { color: #ffffff }
/* NameEntity */ .chroma .ni { color: #ffffff }
/* NameException */ .chroma .ne { color: #ffffff }
/* NameFunction */ .chroma .nf { color: #41a1c0 }
/* NameFunctionMagic */ .chroma .fm { color: #ffffff }
/* NameLabel */ .chroma .nl { color: #ffffff }
/* NameNamespace */ .chroma .nn { color: #ffffff }
/* NameOther */ .chroma .nx { color: #ffffff }
/* NameProperty */ .chroma .py { color: #ffffff }
/* NameTag */ .chroma .nt { color: #ffffff }
/* NameVariable */ .chroma .nv { color: #41a1c0 }
/* NameVariableClass */ .chroma .vc { color: #ffffff }
/* NameVariableGlobal */ .chroma .vg { color: #ffffff }
/* NameVariableInstance */ .chroma .vi { color: #ffffff }
/* NameVariableMagic */ .chroma .vm { color: #ffffff }
/* Literal */ .chroma .l { color: #ffffff }
/* LiteralDate */ .chroma .ld { color: #ffffff }
/* LiteralString */ .chroma .s { color: #fc6a5d }
/* LiteralStringAffix */ .chroma .sa { color: #fc6a5d }
/* LiteralStringBacktick */ .chroma .sb { color: #fc6a5d }
/* LiteralStringChar */ .chroma .sc { color: #fc6a5d }
/* LiteralStringDelimiter */ .chroma .dl { color: #fc6a5d }
/* LiteralStringDoc */ .chroma .sd { color: #fc6a5d }
/* LiteralStringDouble */ .chroma .s2 { color: #fc6a5d }
/* LiteralStringEscape */ .chroma .se { color: #fc6a5d }
/* LiteralStringHeredoc */ .chroma .sh { color: #fc6a5d }
/* LiteralStringInterpol */ .chroma .si { color: #ffffff }
/* LiteralStringOther */ .chroma .sx { color: #fc6a5d }
/* LiteralStringRegex */ .chroma .sr { color: #fc6a5d }
/* LiteralStringSingle */ .chroma .s1 { color: #fc6a5d }
/* LiteralStringSymbol */ .chroma .ss { color: #fc6a5d }
/* LiteralNumber */ .chroma .m { color: #d0bf69 }
/* LiteralNumberBin */ .chroma .mb { color: #d0bf69 }
/* LiteralNumberFloat */ .chroma .mf { color: #d0bf69 }
/* LiteralNumberHex */ .chroma .mh { color: #d0bf69 }
/* LiteralNumberInteger */ .chroma .mi { color: #d0bf69 }
/* LiteralNumberIntegerLong */ .chroma .il { color: #d0bf69 }
/* LiteralNumberOct */ .chroma .mo { color: #d0bf69 }
/* Operator */ .chroma .o { color: #ffffff }
/* OperatorWord */ .chroma .ow { color: #ffffff }
/* Punctuation */ .chroma .p { color: #ffffff }
/* Comment */ .chroma .c { color: #6c7986 }
/* CommentHashbang */ .chroma .ch { color: #6c7986 }
/* CommentMultiline */ .chroma .cm { color: #6c7986 }
/* CommentSingle */ .chroma .c1 { color: #6c7986 }
/* CommentSpecial */ .chroma .cs { color: #6c7986; font-style: italic }
/* CommentPreproc */ .chroma .cp { color: #fd8f3f }
/* CommentPreprocFile */ .chroma .cpf { color: #fd8f3f }
/* Generic */ .chroma .g { color: #ffffff }
/* GenericDeleted */ .chroma .gd { color: #ffffff }
/* GenericEmph */ .chroma .ge { color: #ffffff }
/* GenericError */ .chroma .gr { color: #ffffff }
/* GenericHeading */ .chroma .gh { color: #ffffff }
/* GenericInserted */ .chroma .gi { color: #ffffff }
/* GenericOutput */ .chroma .go { color: #ffffff }
/* GenericPrompt */ .chroma .gp { color: #ffffff }
/* GenericStrong */ .chroma .gs { color: #ffffff }
/* GenericSubheading */ .chroma .gu { color: #ffffff }
/* GenericTraceback */ .chroma .gt { color: #ffffff }
/* GenericUnderline */ .chroma .gl { color: #ffffff }
/* TextWhitespace */ .chroma .w { color: #ffffff }

    }
    @media (prefers-color-scheme: light) { 
      /* Background */ .chroma { background-color: #ffffff }
/* Other */ .chroma .x {  }
/* Error */ .chroma .err { color: #000000 }
/* LineTableTD */ .chroma .lntd { vertical-align: top; padding: 0; margin: 0; border: 0; }
/* LineTable */ .chroma .lntable { border-spacing: 0; padding: 0; margin: 0; border: 0; width: auto; overflow: auto; display: block; }
/* LineHighlight */ .chroma .hl { display: block; width: 100%;background-color: #ffffcc }
/* LineNumbersTable */ .chroma .lnt { margin-right: 0.4em; padding: 0 0.4em 0 0.4em;color: #7f7f7f }
/* LineNumbers */ .chroma .ln { margin-right: 0.4em; padding: 0 0.4em 0 0.4em;color: #7f7f7f }
/* Keyword */ .chroma .k { color: #a90d91 }
/* KeywordConstant */ .chroma .kc { color: #a90d91 }
/* KeywordDeclaration */ .chroma .kd { color: #a90d91 }
/* KeywordNamespace */ .chroma .kn { color: #a90d91 }
/* KeywordPseudo */ .chroma .kp { color: #a90d91 }
/* KeywordReserved */ .chroma .kr { color: #a90d91 }
/* KeywordType */ .chroma .kt { color: #a90d91 }
/* Name */ .chroma .n { color: #000000 }
/* NameAttribute */ .chroma .na { color: #836c28 }
/* NameBuiltin */ .chroma .nb { color: #a90d91 }
/* NameBuiltinPseudo */ .chroma .bp { color: #5b269a }
/* NameClass */ .chroma .nc { color: #3f6e75 }
/* NameConstant */ .chroma .no { color: #000000 }
/* NameDecorator */ .chroma .nd { color: #000000 }
/* NameEntity */ .chroma .ni { color: #000000 }
/* NameException */ .chroma .ne { color: #000000 }
/* NameFunction */ .chroma .nf { color: #000000 }
/* NameFunctionMagic */ .chroma .fm { color: #000000 }
/* NameLabel */ .chroma .nl { color: #000000 }
/* NameNamespace */ .chroma .nn { color: #000000 }
/* NameOther */ .chroma .nx { color: #000000 }
/* NameProperty */ .chroma .py { color: #000000 }
/* NameTag */ .chroma .nt { color: #000000 }
/* NameVariable */ .chroma .nv { color: #000000 }
/* NameVariableClass */ .chroma .vc { color: #000000 }
/* NameVariableGlobal */ .chroma .vg { color: #000000 }
/* NameVariableInstance */ .chroma .vi { color: #000000 }
/* NameVariableMagic */ .chroma .vm { color: #000000 }
/* Literal */ .chroma .l { color: #1c01ce }
/* LiteralDate */ .chroma .ld { color: #1c01ce }
/* LiteralString */ .chroma .s { color: #c41a16 }
/* LiteralStringAffix */ .chroma .sa { color: #c41a16 }
/* LiteralStringBacktick */ .chroma .sb { color: #c41a16 }
/* LiteralStringChar */ .chroma .sc { color: #2300ce }
/* LiteralStringDelimiter */ .chroma .dl { color: #c41a16 }
/* LiteralStringDoc */ .chroma .sd { color: #c41a16 }
/* LiteralStringDouble */ .chroma .s2 { color: #c41a16 }
/* LiteralStringEscape */ .chroma .se { color: #c41a16 }
/* LiteralStringHeredoc */ .chroma .sh { color: #c41a16 }
/* LiteralStringInterpol */ .chroma .si { color: #c41a16 }
/* LiteralStringOther */ .chroma .sx { color: #c41a16 }
/* LiteralStringRegex */ .chroma .sr { color: #c41a16 }
/* LiteralStringSingle */ .chroma .s1 { color: #c41a16 }
/* LiteralStringSymbol */ .chroma .ss { color: #c41a16 }
/* LiteralNumber */ .chroma .m { color: #1c01ce }
/* LiteralNumberBin */ .chroma .mb { color: #1c01ce }
/* LiteralNumberFloat */ .chroma .mf { color: #1c01ce }
/* LiteralNumberHex */ .chroma .mh { color: #1c01ce }
/* LiteralNumberInteger */ .chroma .mi { color: #1c01ce }
/* LiteralNumberIntegerLong */ .chroma .il { color: #1c01ce }
/* LiteralNumberOct */ .chroma .mo { color: #1c01ce }
/* Operator */ .chroma .o { color: #000000 }
/* OperatorWord */ .chroma .ow { color: #000000 }
/* Punctuation */ .chroma .p {  }
/* Comment */ .chroma .c { color: #177500 }
/* CommentHashbang */ .chroma .ch { color: #177500 }
/* CommentMultiline */ .chroma .cm { color: #177500 }
/* CommentSingle */ .chroma .c1 { color: #177500 }
/* CommentSpecial */ .chroma .cs { color: #177500 }
/* CommentPreproc */ .chroma .cp { color: #633820 }
/* CommentPreprocFile */ .chroma .cpf { color: #633820 }
/* Generic */ .chroma .g {  }
/* GenericDeleted */ .chroma .gd {  }
/* GenericEmph */ .chroma .ge {  }
/* GenericError */ .chroma .gr {  }
/* GenericHeading */ .chroma .gh {  }
/* GenericInserted */ .chroma .gi {  }
/* GenericOutput */ .chroma .go {  }
/* GenericPrompt */ .chroma .gp {  }
/* GenericStrong */ .chroma .gs {  }
/* GenericSubheading */ .chroma .gu {  }
/* GenericTraceback */ .chroma .gt {  }
/* GenericUnderline */ .chroma .gl {  }
/* TextWhitespace */ .chroma .w {  }
 
    }
</style>




<link rel="stylesheet" type="text/css" href="/blog/hugo-cite.css" />
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/blog/"><span>Ze&#39;s Blog</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="æœç´¢" aria-label="æœç´¢" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>



  



  
    
  



<ul class="book-languages">
  <li>
    <input type="checkbox" id="languages" class="toggle" />
    <label for="languages" class="flex justify-between">
      <a role="button" class="flex align-center">
        <img src="/blog/svg/translate.svg" class="book-icon" alt="Languages" />
        Chinese
      </a>
    </label>

    <ul>
      
      <li>
        <a href="https://zeqiang-lai.github.io/blog/en/">
          English
        </a>
      </li>
      
    </ul>
  </li>
</ul>











  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Notes</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/blog/docs/notes/concept/" class="">Concept</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/blog/docs/notes/paper/" class="">Paper</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/blog/docs/gen/" class="">AIGC</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/blog/docs/matrix/" class="">Matrix</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href="/blog/posts/" >
        Posts
      </a>
  </li>
  
  <li>
    <a href="https://zeqiang-lai.github.io/Algorithms/" target="_blank" rel="noopener"></br>
        Algorithms
      </a>
  </li>
  
  <li>
    <a href="https://zeqiang-lai.github.io/" target="_blank" rel="noopener">
        Profile
      </a>
  </li>
  
  <li>
    <a href="https://github.com/Zeqiang-Lai" target="_blank" rel="noopener"></br><i class="fab fa-github"></i>
        Github
      </a>
  </li>
  
</ul>





<div class="js-toggle-wrapper">
  <div class="js-toggle">
    <div class="js-toggle-track">
      <div class="js-toggle-track-check">
        <img
          src="data:image/png;base64,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"
          role="presentation"
          style="pointer-events: none"
          width="20"
          height="20"
        />
      </div>
      <div class="js-toggle-track-x">
        <img
          src="data:image/png;base64,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"
          role="presentation"
          style="pointer-events: none"
          width="20"
          height="20"
        />
      </div>
    </div>
    <div class="js-toggle-thumb">
      <img
        src="data:image/png;base64,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"
        role="presentation"
        style="pointer-events: none"
        width="30"
        height="30"
      />
    </div>
    <input
      class="js-toggle-screenreader-only"
      type="checkbox"
      aria-label="Switch between Dark and Light mode"
    />
  </div>
</div>

</nav>




  <script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
    <label for="menu-control">
      <img src="/blog/svg/menu.svg" class="book-icon" alt="Menu" />
    </label>
  
    
    <label for="toc-control">
      
      <img src="/blog/svg/toc.svg" class="book-icon" alt="Table of Contents" />
      
    </label>
  </div>
  

  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#å†™åœ¨å‰é¢">å†™åœ¨å‰é¢</a></li>
        <li><a href="#ddim-å‡ºå‘ç‚¹">DDIM å‡ºå‘ç‚¹</a></li>
        <li><a href="#ddim-æ¨å¯¼">DDIM æ¨å¯¼</a></li>
        <li><a href="#ddim-è®ºæ–‡çš„ä¸€äº›-typo">DDIM è®ºæ–‡çš„ä¸€äº› typo</a></li>
        <li><a href="#ddim-é‡‡æ ·">DDIM é‡‡æ ·</a></li>
        <li><a href="#å¿«é€Ÿé‡‡æ ·">å¿«é€Ÿé‡‡æ ·</a></li>
        <li><a href="#è®¨è®º">è®¨è®º</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
<article class="markdown">
  <h1>
    <a href="/blog/posts/ai/ddim/">å…³äº DDIM é‡‡æ ·ç®—æ³•çš„æ¨å¯¼</a>
  </h1>
  
  <h5>November 5, 2023</h5>



  
  <div>
    
      <a href="/blog/categories/%E6%89%A9%E6%95%A3%E6%A8%A1%E5%9E%8B/">æ‰©æ•£æ¨¡å‹</a>
  </div>
  

  



<h5>ä½œè€…: èµ–æ³½å¼º</h5>
<h2 id="å†™åœ¨å‰é¢">
  å†™åœ¨å‰é¢
  <a class="anchor" href="#%e5%86%99%e5%9c%a8%e5%89%8d%e9%9d%a2">#</a>
</h2>
<p>DDIM å…¨ç§° ã€Denoising Diffusion Implict Modelã€‘ï¼Œæ˜¯ä¸€ç¯‡å‘è¡¨äº ICLR 2021 çš„è®ºæ–‡ï¼Œä¸è¿‡å®é™…æ—¶é—´ä¹Ÿå°±æ¯” DDPM æ™šå‡ ä¸ªæœˆï¼ˆ2020 å¹´ 10 æœˆï¼‰å°±æŒ‚åœ¨ arXiv ä¸Šäº†ã€‚ä½œè€…å‘¢ï¼Œåˆ™æ˜¯ Yang Song åšå£«ï¼ˆä¹Ÿå°±æ˜¯ Score-based Diffusion Model çš„å¥ åŸºäººï¼‰çš„åŒé—¨ï¼ŒJiaming Song åšå£«ï¼Œ Chenlin Meng åšå£«ï¼ˆå¥¹åœ¨Guided Diffusion è’¸é¦é¢†åŸŸçš„æ—©æœŸå·¥ä½œè·å¾—äº† CVPR2023 çš„ Award Candidateï¼‰ï¼Œä»¥åŠ Stefano Ermon æ•™æˆã€‚</p>
<p>è€å®è¯´ï¼Œè¿™æ˜¯ä¸€ç¯‡æ¯”è¾ƒéš¾æ‡‚çš„è®ºæ–‡ï¼Œä¸€æ–¹é¢æ˜¯é‡Œé¢æ¶‰åŠå¤§é‡çš„æ¨å¯¼ä»¥åŠæ¦‚ç‡è®ºç­‰ç›¸å…³èƒŒæ™¯çŸ¥è¯†ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿæ˜¯æ¨å¯¼è¿‡ç¨‹ä¸å¤ªç›´è§‚ï¼Œä»¥åŠåˆšæ¥è§¦çš„äººéš¾ä»¥è·å–åˆ°çš„ intutitionï¼Œå…¶ä»–ä¹ŸåŒ…æ‹¬ä¸€äº› notation çš„å·®å¼‚å’Œ typoã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸ªäººå¯¹ DDIM çš„ä¸€äº›ç†è§£ï¼ˆæ•°å­¦ä¸å¥½ï¼Œè®°æ€§ä¹Ÿä¸è¡Œï¼Œä¹Ÿå½“æ˜¯æ–¹ä¾¿ä»¥åæŸ¥é˜…çš„ç¬”è®°ï¼‰ï¼Œå¦‚æœæœ‰ç†è§£ä¸Šçš„é”™è¯¯ï¼Œè¿˜è¯·å¤§ä½¬ä»¬æ‰¹è¯„æŒ‡æ­£ã€‚</p>
<p>æ’°å†™è¿‡ç¨‹ä¸ä»…å‚è€ƒäº†åŸè®ºæ–‡ï¼Œè¿˜åŒ…æ‹¬äº†</p>
<ul>
<li>
<p>è‹å‰‘æ—è€å¸ˆçš„
  <a href="https://kexue.fm/archives/9181">ã€Šç”Ÿæˆæ‰©æ•£æ¨¡å‹æ¼«è°ˆï¼ˆå››ï¼‰ï¼šDDIM = é«˜è§‚ç‚¹DDPMã€‹</a></p>
</li>
<li>
<p>å¼ æŒ¯è™çš„åšå®¢
  <a href="https://www.zhangzhenhu.com/aigc/ddim.html">ã€Šå»å™ªæ‰©æ•£éšå¼æ¨¡å‹ï¼ˆDenoising Diffusion Implicit Models,DDIMï¼‰ã€‹</a></p>
</li>
</ul>
<p>åœ¨æ­¤å‘äº’è”ç½‘ä¸Šçƒ­å¿ƒåˆ†äº«çš„åŒåƒšè¡¨ç¤ºæ•¬æ„ã€‚</p>
<hr>
<h2 id="ddim-å‡ºå‘ç‚¹">
  DDIM å‡ºå‘ç‚¹
  <a class="anchor" href="#ddim-%e5%87%ba%e5%8f%91%e7%82%b9">#</a>
</h2>
<p>DDIM è™½ç„¶æ˜¯ä¸€ä¸ªæ¯”è¾ƒéš¾çš„ç®—æ³•ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€æ¯ä¸€ä¸ªä»äº‹æ‰©æ•£æ¨¡å‹ç ”ç©¶çš„äººå‘˜éƒ½éœ€è¦çŸ¥é“å…¶å…·ä½“çš„åŸç†ã€‚å¯¹äºå¤§éƒ¨åˆ†äººæ¥è¯´ï¼Œå…¶å®åªéœ€è¦çŸ¥é“</p>
<blockquote>
<p>DDIM æ˜¯ DDPM çš„ä¸€ç§åŠ é€Ÿé‡‡æ ·ç®—æ³•ï¼Œå®ƒå¯ä»¥è¿›è¡Œç¡®å®šæ€§é‡‡æ ·ï¼ˆä¹Ÿå³ç»™å®šä¸€ä¸ªåˆå§‹çš„éšæœºå™ªå£°ï¼Œé€šè¿‡DDIM è¿›è¡Œé‡‡æ ·ï¼Œä¸ç®¡é‡‡æ ·å¤šå°‘æ¬¡ï¼Œæœ€ç»ˆçš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œè€ŒåŸå§‹çš„ DDPM é‡‡æ ·æ˜¯éšæœºé‡‡æ ·ï¼Œå³ä¾¿åˆå§‹å™ªå£°ä¸€è‡´ï¼Œæœ€ç»ˆç»“æœä¹Ÿå¯èƒ½ä¸ä¸€è‡´ï¼‰ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒDDIM é‡‡æ ·å¯ä»¥åœ¨ 50 æ­¥å·¦å³è¾¾åˆ° DDPM 1000 æ­¥çš„æ€§èƒ½/å›¾ç‰‡è´¨é‡ã€‚</p>
</blockquote>
<p>ä¸è¿‡å¦‚æœæƒ³è¦åŸºäº DDIM åšä¸€äº›è¿›ä¸€æ­¥çš„ç ”ç©¶ï¼Œæˆ‘ä»¬åˆ™å¿…é¡»æ›´è¿›ä¸€æ­¥ï¼š</p>
<p>å› ä¸ºä¸æ˜¯ä½œè€…æœ¬äººï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ— ä»å¾—çŸ¥ï¼ŒDDIM ä¸€å¼€å§‹æ€ä¹ˆè¢«æƒ³å‡ºæ¥çš„ã€‚ä½†æ˜¯ä»è®ºæ–‡ä»¥åŠä¸ªäººç†è§£æ¥çœ‹ï¼ŒDDIM çš„æ¨å¯¼åŸºçŸ³åº”è¯¥æ˜¯å‘ç°äº† DDPM çš„è®­ç»ƒç›®æ ‡å®é™…ä¸Šåªè·Ÿ $q(x_t|x_0)$ è¿™ä¸ªè¾¹ç¼˜åˆ†å¸ƒæœ‰å…³ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬æœ‰ä¸€ç°‡ä¸åŒçš„ç”Ÿæˆæ¨¡å‹å¯ä»¥ä¸ä¹‹å¯¹åº”ï¼Œæ¢è¨€ä¹‹ï¼Œé€šè¿‡è¿™ä¸ªè®­ç»ƒç›®æ ‡è®­ç»ƒå‡ºæ¥çš„æ¨¡å‹å¯ä»¥ç”¨äºä¸åŒç”Ÿæˆæ¨¡å‹çš„é‡‡æ ·è¿‡ç¨‹ï¼Œå¦‚æœæˆ‘ä»¬èƒ½æ‰¾åˆ°ä¸€ä¸ªæ”¶æ•›æ›´å¿«çš„ç”Ÿæˆæ¨¡å‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å®é™…ä¸Šå˜ç›¸çš„åŠ é€Ÿäº† DDPM çš„é‡‡æ ·ï¼ˆä¸ºä»€ä¹ˆè¯´æ˜¯å˜ç›¸å‘¢ï¼Œå› ä¸ºä¸¥æ ¼æ¥è¯´ï¼Œè¿™æ—¶å€™çš„ç”Ÿæˆæ¨¡å‹åº”è¯¥ä¸ç®—æ˜¯ DDPM äº†ï¼‰ã€‚</p>
<details open><summary>é‚£ä¹ˆä¸ºä»€ä¹ˆè¯´ <strong>DDPM çš„è®­ç»ƒç›®æ ‡å®é™…ä¸Šåªè·Ÿ $q(x_t|x_0)$ è¿™ä¸ªè¾¹ç¼˜åˆ†å¸ƒæœ‰å…³</strong> å‘¢ ï¼Ÿ</summary>
  <div class="markdown-inner">
    <p>å¦‚æœæˆ‘ä»¬ä» Latent variable model çš„è§’åº¦è€ƒè™‘ Diffusion Modelï¼Œæˆ‘ä»¬çš„éšå˜é‡æ˜¯ä¸€ä¸ªé›†åˆ $x_{1:T}$ï¼Œæˆ‘ä»¬åœ¨ä¼˜åŒ–çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯åœ¨ä¼˜åŒ–ä¸‹é¢çš„ å˜åˆ†ä¸‹ç•Œï¼ˆELBOï¼‰ï¼š</p>
<div>
$$
\begin{aligned}
    log P(x) & = log\int P(x_0|x_{1:T})P(x_{1:T})dx_{1:T}                            \\
                & \geq E_{x\sim Q}[log\frac{ P(x_0|x_{1:T})P(x_{1:T})}{Q(x_{1:T}|x_0)}] \\
                & = E_{x\sim Q}[log\frac{ P(x_{0:T})}{Q(x_{1:T}|x_0)}]
\end{aligned}
$$
</div>
<p>ä¹ä¸€çœ‹ï¼Œè¿™ä¸ªä¼˜åŒ–ç›®æ ‡å’Œè”åˆåˆ†å¸ƒ $P(x_{0:T})$ å’Œ $Q(x_{1:T}|x_0)$ æœ‰å…³ã€‚</p>
<p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸ªä¼˜åŒ–ç›®æ ‡å±•å¼€ï¼Œå‚è€ƒ DDPM åŸå§‹è®ºæ–‡ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™ä¹ˆä¸€ä¸ªä¼˜åŒ–ç›®æ ‡</p>
<div>
$$
\mathbb{E}_q[\underbrace{D_{\mathrm{KL}}\left(q\left(\mathbf{x}_T \mid \mathbf{x}_0\right) \| p\left(\mathbf{x}_T\right)\right)}_{L_T}+\sum_{t>1} \underbrace{D_{\mathrm{KL}}\left(q\left(\mathbf{x}_{t-1} \mid \mathbf{x}_t, \mathbf{x}_0\right) \| p_\theta\left(\mathbf{x}_{t-1} \mid \mathbf{x}_t\right)\right)}_{L_{t-1}} \underbrace{-\log p_\theta\left(\mathbf{x}_0 \mid \mathbf{x}_1\right)}_{L_0}]
$$
</div>
<p>å…¶ä¸­ $L_0$ å’Œ $L_T$ éƒ½æ˜¯ä¸è®­ç»ƒçš„ï¼Œæ‰€ä»¥å®é™… loss é‡Œæ²¡æœ‰ä»–ä»¬ï¼Œå¯¹äº $L_{t-1}$ï¼ŒDDPM çš„ formulation æ˜¯</p>
<div>
$$
\mathbb{E}_{\mathbf{x}_0, \boldsymbol{\epsilon}}\left[\frac{\beta_t^2}{2 \sigma_t^2 \alpha_t\left(1-\bar{\alpha}_t\right)}\left\|\boldsymbol{\epsilon}-\boldsymbol{\epsilon}_\theta\left(\sqrt{\bar{\alpha}_t} \mathbf{x}_0+\sqrt{1-\bar{\alpha}_t} \boldsymbol{\epsilon}, t\right)\right\|^2\right]
$$
</div>
<p>è€Œ $\sqrt{\bar{\alpha}_t} \mathbf{x}_0+\sqrt{1-\bar{\alpha}_t} \boldsymbol{\epsilon}$ å¯¹åº”çš„æ˜¯ $q(x_t|x_0)$ çš„é‡‡æ ·è¿‡ç¨‹ã€‚</p>
<p>æ‰€ä»¥ï¼Œå®é™…ä¸Š DDPM çš„ä¼˜åŒ–ç›®æ ‡å®é™…ä¸Šåªä¸ $q(x_t|x_0)$ æœ‰å…³ï¼Œå› æ­¤ï¼Œé€šè¿‡è¿™ä¸ªä¼˜åŒ–ç›®æ ‡è®­ç»ƒå‡ºæ¥çš„æ¨¡å‹ï¼Œå¯ä»¥ç”¨åˆ°ä»»ä½•å…·æœ‰ç›¸åŒ $q(x_t|x_0)$ çš„ç”Ÿæˆæ¨¡å‹ã€‚</p>

  </div>
</details>

<h2 id="ddim-æ¨å¯¼">
  DDIM æ¨å¯¼
  <a class="anchor" href="#ddim-%e6%8e%a8%e5%af%bc">#</a>
</h2>
<p>åœ¨ç†è§£å‡ºå‘ç‚¹ä¹‹åï¼Œæˆ‘ä»¬çš„ç›®æ ‡å°±å¾ˆæ˜ç¡®äº†ï¼Œæ€ä¹ˆæ‰¾ä¸€ä¸ªå…·æœ‰ç›¸åŒ $q(x_t|x_0)$ çš„ç”Ÿæˆæ¨¡å‹ï¼ˆè®ºæ–‡é‡Œç§°ä¹‹ä¸º generative processï¼‰ã€‚è¿™éƒ¨åˆ†å°±æ˜¯ DDIM åŸè®ºæ–‡ç¬¬ä¸‰ç« ã€ŠVariational Inference for Non-Markovian Forward Processesã€‹çš„å†…å®¹ã€‚</p>
<p>è¿™ä¸€ç« ä½œè€…æåˆ°ä»–ä»¬ä½¿ç”¨äº†ä¸€ä¸ª non-Markovian çš„ inference process å»æ›¿ä»£ DDPM çš„ Markovian inference processï¼Œè‡³äºäºŒè€…çš„åŒºåˆ«å¯ä»¥åœ¨åé¢å†ç»†ç©¶ã€‚</p>
<blockquote class="book-hint info">
  <p><strong>é©¬å°”ç§‘å¤«è¿‡ç¨‹</strong></p>
<p>æ¯ä¸ªçŠ¶æ€è½¬ç§»åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€çš„æ¦‚ç‡åªä¸å½“å‰çŠ¶æ€æœ‰å…³ã€‚</p>

</blockquote>

<p>åŸè®ºæ–‡é‡Œ 3.1 èŠ‚æ˜¯æ¯”è¾ƒé­”å¹»ï¼Œå®¹æ˜“è®©äººè«åå…¶å¦™çš„ï¼Œå› ä¸ºä½œè€…è¿™é‡Œç›´æ¥ç»™å‡ºæ¥ä»–ä»¬æ¨å¯¼å‡ºæ¥çš„ç»“æœï¼Œç„¶ååœ¨é™„å½•é‡Œé™„ä¸Šäº†è¯æ˜è¿‡ç¨‹ï¼Œè¯æ˜è¯¥ generative process å’Œ DDPM å…·æœ‰ç›¸åŒçš„ $q(x_t|x_0)$ï¼Œä½†è¿™ä¸ªç»“æœè‚¯å®šä¸æ˜¯æ‹è„‘è¢‹å‡ºæ¥çš„ï¼Œåœ¨è‹å‰‘æ—è€å¸ˆçš„åšå®¢é‡Œï¼Œä»–é€šè¿‡å¾…å®šç³»æ•°æ³•ï¼Œä»çº¦æŸå‡ºå‘å‘ˆç°äº†è¯¥ç»“æœçš„æ¨å¯¼è¿‡ç¨‹ï¼Œè™½ç„¶è¿™ä¸ä¸€å®šæ˜¯åŸä½œè€…çš„çœŸå®æ¨å¯¼è¿‡ç¨‹ï¼Œä½†ä¸€å®šç¨‹åº¦ä¸Šä¹Ÿå¯ä»¥ä¾›å‚è€ƒï¼š</p>
<p>é¦–å…ˆæˆ‘ä»¬å›é¡¾ä¸€ä¸‹ DDPM çš„æ¨å¯¼è¿‡ç¨‹</p>
<div>
$$
p(\boldsymbol{x}_t|\boldsymbol{x}_{t-1})\xrightarrow{\text{æ¨å¯¼}}p(\boldsymbol{x}_t|\boldsymbol{x}_0)\xrightarrow{\text{æ¨å¯¼}}q(\boldsymbol{x}_{t-1}|\boldsymbol{x}_t, \boldsymbol{x}_0)\xrightarrow{\text{è¿‘ä¼¼}}p(\boldsymbol{x}_{t-1}|\boldsymbol{x}_t)
$$
</div>
<p>å…¶ä¸­é‡‡æ ·è¿‡ç¨‹ç†è®ºä¸Šéœ€è¦ç”¨åˆ° $p(x_{t-1}|x_t)$, ä½†å®é™…ä¸Šé‡‡ç”¨ $q(x_{t-1}|x_t, x_0)$ åšè¿‘ä¼¼ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯æ¨å¯¼ä¸€ä¸ªä¸ä¸€æ ·çš„ $q(x_{t-1}|x_t, x_0)$ï¼Œåœ¨åŸè®ºæ–‡é‡Œï¼Œä½œè€…ç›´æ¥å†™å‡ºäº†è¿™ä¸ªå…¬å¼ï¼ˆåŸè®ºæ–‡çš„å…¬å¼ 7ï¼‰ï¼š</p>
<div>
$$
q_\sigma\left(\boldsymbol{x}_{t-1} \mid \boldsymbol{x}_t, \boldsymbol{x}_0\right)=\mathcal{N}\left(\sqrt{\alpha_{t-1}} \boldsymbol{x}_0+\sqrt{1-\alpha_{t-1}-\sigma_t^2} \cdot \frac{\boldsymbol{x}_t-\sqrt{\alpha_t} \boldsymbol{x}_0}{\sqrt{1-\alpha_t}}, \sigma_t^2 \boldsymbol{I}\right) .
$$
</div>
<p>é‚£ä¹ˆæ€ä¹ˆæ¨å¯¼å‘¢ï¼Ÿåœ¨ DDPM çš„è®ºæ–‡é‡Œï¼Œæˆ‘ä»¬æœ‰</p>
<div>
$$
\begin{aligned}
q\left(\mathbf{x}_{t-1} \mid \mathbf{x}_t, \mathbf{x}_0\right) & =\mathcal{N}\left(\mathbf{x}_{t-1} ; \tilde{\boldsymbol{\mu}}_t\left(\mathbf{x}_t, \mathbf{x}_0\right), \tilde{\beta}_t \mathbf{I}\right) \\
\text { where } \quad \tilde{\boldsymbol{\mu}}_t\left(\mathbf{x}_t, \mathbf{x}_0\right) & :=\frac{\sqrt{\bar{\alpha}_{t-1}} \beta_t}{1-\bar{\alpha}_t} \mathbf{x}_0+\frac{\sqrt{\alpha_t}\left(1-\bar{\alpha}_{t-1}\right)}{1-\bar{\alpha}_t} \mathbf{x}_t \quad \text { and } \quad \tilde{\beta}_t:=\frac{1-\bar{\alpha}_{t-1}}{1-\bar{\alpha}_t} \beta_t
\end{aligned}
$$
</div>
<p>å¯ä»¥çœ‹åˆ° $q(x_{t-1}|x_t, x_0)$ è¿™é‡Œæ˜¯ä¸€ä¸ªæ­£æ€åˆ†å¸ƒï¼ŒåŸºäºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å‡è®¾ä¸€ä¸ªæ›´generalçš„å½¢å¼ï¼Œæˆ‘ä»¬å‡è®¾ï¼š</p>
<div>
$$
q(\boldsymbol{x}_{t-1}|\boldsymbol{x}_t, \boldsymbol{x}_0) = \mathcal{N}(\boldsymbol{x}_{t-1}; \kappa_t \boldsymbol{x}_t + \lambda_t \boldsymbol{x}_0, \sigma_t^2 \boldsymbol{I})
$$
</div>
<p><strong>å›å¿†</strong></p>
<blockquote>
<p>ä»¥ä¸‹æ¨å¯¼åŸºäºè‹å‰‘æ—çš„åšå®¢å’ŒåŸè®ºæ–‡é™„å½• B</p>
</blockquote>
<p>æˆ‘ä»¬çš„çº¦æŸæ˜¯å’Œ DDPM å…·æœ‰ç›¸åŒçš„ $q(x_t|x_0)$ï¼Œé‚£ä¹ˆæ ¹æ®å½’çº³æ³•ï¼Œè¿™ç­‰ä»·äºçº¦æŸå’Œ DDPM å…·æœ‰ç›¸åŒçš„ $q(x_{t-1}|x_0)$ã€‚</p>
<details open><summary>ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªè½¬æ¢å‘¢ï¼Ÿ</summary>
  <div class="markdown-inner">
    <p>å› ä¸ºå¦‚æœæˆ‘ä»¬æƒ³è¦çº¦æŸ $q(x_t|x_0)$ï¼Œé‚£ä¹ˆç›´è§‰ä¸Šç¬¬ä¸€æ­¥æ˜¯å»ºç«‹ $q(x_t|x_0)$ å’Œ $q(x_{t-1}|x_t, x_0)$ çš„è”ç³»ï¼Œè¿™å¯ä»¥é€šè¿‡è´å¶æ–¯å…¬å¼å®ç°ï¼š</p>
<div>
$$
q(\boldsymbol{x}_{t-1}|\boldsymbol{x}_t, \boldsymbol{x}_0) \sim p(\boldsymbol{x}_{t-1}|\boldsymbol{x}_t, \boldsymbol{x}_0) = \frac{p(\boldsymbol{x}_t|\boldsymbol{x}_{t-1})p(\boldsymbol{x}_{t-1}|\boldsymbol{x}_0)}{p(\boldsymbol{x}_t|\boldsymbol{x}_0)}
$$
</div>
<blockquote>
<p>å› ä¸º q åˆ†å¸ƒæ˜¯å¯¹ p åˆ†å¸ƒçš„ç­‰ä»·è¿‘ä¼¼ï¼Œä¸‹é¢ä½¿ç”¨ p åˆ†å¸ƒè¿›è¡Œæ¨å¯¼ã€‚</p>
</blockquote>
<p>é¦–å…ˆè¿›è¡Œä¸€ä¸ªç­‰ä»·å˜æ¢</p>
<div>
$$
p(\boldsymbol{x}_{t-1}|\boldsymbol{x}_t, \boldsymbol{x}_0) p(\boldsymbol{x}_t|\boldsymbol{x}_0) = p(\boldsymbol{x}_t|\boldsymbol{x}_{t-1}) p(\boldsymbol{x}_{t-1}|\boldsymbol{x}_0)
$$
</div>
<p>å·¦å³ä¸¤è¾¹åŒæ—¶ç§¯åˆ†æ¶ˆæ‰ $p(x_t|x_{t-1})$ å¾—åˆ°</p>
<div>
$$
\int p(\boldsymbol{x}_{t-1}|\boldsymbol{x}_t, \boldsymbol{x}_0) p(\boldsymbol{x}_t|\boldsymbol{x}_0) d\boldsymbol{x}_t = p(\boldsymbol{x}_{t-1}|\boldsymbol{x}_0)\label{eq:margin}
$$
</div>
<p>å…³äºè¿™ä¸ªè½¬æ¢ï¼Œæ¦‚ç‡è®ºå°ç™½ä¸€å¼€å§‹è¡¨ç¤ºéå¸¸éš¾ä»¥ç†è§£ï¼Œä¸è¿‡ä»”ç»†æƒ³æƒ³ï¼Œå³è¾¹ä¹‹æ‰€ä»¥èƒ½æ¶ˆæ‰æ˜¯å› ä¸º $p(x_{t-1}|x_0)$ è·Ÿ $x_t$ æ— å…³ï¼Œæ‰€ä»¥å¯¹å³è¾¹ç§¯åˆ†ï¼Œç­‰ä»·äº $p(x_{t-1}|x_0) \int p(x_t|x_{t-1}) dx_t = p(x_{t-1}|x_0) \times 1$ã€‚</p>
<blockquote>
<p>å¦å¤–ï¼Œå…¶å®è¿™ç©æ„ä¹Ÿæ€ªæ€ªçš„ $\int p(x_t|x_{t-1}) dx_t = 1$ï¼Œå› ä¸ºæˆ‘ä»¬ä¸€èˆ¬è§åˆ°çš„æ˜¯è¾¹ç¼˜æ¦‚ç‡çš„å½¢å¼ $\int p(x_t) dx_t = 1$ï¼Œè€Œéå‰é¢é‚£ç§æ¡ä»¶æ¦‚ç‡ã€‚ä¸è¿‡ç­‰å¼å·¦è¾¹ç§¯åˆ†å®é™…ä¸Š $x_t$ æ¯ä¸ªå–å€¼çš„å’Œï¼Œä½†$x_t$ æœ¬èº«æ˜¯å…³äº $x_{t-1}$ çš„å‡½æ•°ï¼Œä¸è¿‡å› ä¸ºæ˜¯æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼Œæ‰€ä»¥å’Œè‡ªç„¶ä¹Ÿè¿˜æ˜¯ 1 ã€‚</p>
</blockquote>
<p>å›åˆ°åˆšåˆšçš„ç§¯åˆ†ï¼Œç­‰å¼å·¦è¾¹éƒ½åŒ…å«æœ‰ $x_t$ï¼Œè‡ªç„¶æ˜¯æ²¡æ³•åƒå³è¾¹ä¸€æ ·æ¶ˆæ‰ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬è‡³æ­¤å¾—åˆ°äº† $p(x_{t-1}|x_0)$ çš„è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬åªè¦æŠŠå‰é¢å‡è®¾çš„æ›´ general çš„ $q(x_{t-1}|x_t, x_0)$ï¼ˆå¦‚ä¸‹ï¼‰ çš„ä»£å…¥ç­‰å¼ï¼Œç”¨å¾…å®šç³»æ•°æ³•æ±‚è§£å³å¯å¾—åˆ° $q(x_{t-1}|x_t, x_0)$ çš„è¡¨è¾¾å¼ã€‚</p>
<div>
$$
q(\boldsymbol{x}_{t-1}|\boldsymbol{x}_t, \boldsymbol{x}_0) = \mathcal{N}(\boldsymbol{x}_{t-1}; \kappa_t \boldsymbol{x}_t + \lambda_t \boldsymbol{x}_0, \sigma_t^2 \boldsymbol{I})
$$
</div>

  </div>
</details>

<p><strong>å¾…å®šç³»æ•°æ³•æ±‚è§£</strong></p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬çŸ¥é“ $p(x_{t-1}|x_0) = N(\sqrt{\alpha_{t-1}}x_0, (1-\alpha_{t-1}) I)$ï¼Œä½†ç­‰å¼é‡Œçš„ç§¯åˆ†æ€ä¹ˆåŠï¼Ÿ</p>
<blockquote class="book-hint warning">
  <p><strong>æ³¨æ„</strong></p>
<p>è¿™é‡Œçš„ $\alpha_{t-1}$ ç­‰ä»·äº DDPM é‡Œçš„ $\bar{\alpha_{t-1}}$ï¼Œä½œè€…åœ¨é™„å½•é‡Œæœ‰ä¸“é—¨è®²ä¸ºä»€ä¹ˆä»–è¦ç”¨è¿™å¥— notationã€‚</p>

</blockquote>

<p>DDIM é‡Œçš„åŸè®ºæ–‡æ˜¯å…ˆç»™å‡ºäº† $p(x_{t-1}|x_t, x_0)$ï¼Œç„¶ååŸºäºæ¡ä»¶ $p(x_{t}|x_0) = N(\sqrt{\alpha_{t}}, (1-\alpha_{t}) I)$ï¼Œé€šè¿‡ Bishop (2006) (2.115), è¯æ˜ç­‰å¼æˆç«‹ã€‚</p>
<blockquote>
<p>Bishop(2006): Christopher M Bishop. Pattern recognition and machine learning. springer, 2006.</p>
</blockquote>
<p>é‚£ Bishop(2006) 2.115 ç©¶ç«Ÿè®²äº†ä¸ªä»€ä¹ˆå‘¢ï¼Œæ²¡æœ‰ä¹¦çš„çœ‹
  <a href="https://github.com/peteflorence/MachineLearning6.867/blob/master/Bishop/Bishop%20-%20Pattern%20Recognition%20and%20Machine%20Learning.pdf">è¿™é‡Œ</a>ã€‚</p>
<figure><img src="image.png"
         alt="Bishop(2006) 2.115"/><figcaption>
            <p>Bishop(2006) 2.115</p>
        </figcaption>
</figure>

<p>è¿™é‡Œç›´æ¥æˆªå›¾äº†ï¼Œå…¶å®è®²çš„å°±æ˜¯å½“ç»™å®šä¸€ä¸ªé«˜æ–¯çš„è¾¹ç¼˜åˆ†å¸ƒ $p(x)$ å’Œæ¡ä»¶é«˜æ–¯åˆ†å¸ƒ$p(y|x)$æ—¶ï¼Œå¦ä¸€ä¸ªè¾¹ç¼˜åˆ†å¸ƒæ˜¯ $p(y)$ æ˜¯æ€ä¹ˆæ ·çš„ã€‚åˆ©ç”¨è¿™ä¸ªæ€§è´¨(2.115)ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒå¥—åˆ°ä¹‹å‰çš„ç­‰å¼é‡Œã€‚</p>
<div>
$$
\int p(\boldsymbol{x}_{t-1}|\boldsymbol{x}_t, \boldsymbol{x}_0) p(\boldsymbol{x}_t|\boldsymbol{x}_0) d\boldsymbol{x}_t = p(\boldsymbol{x}_{t-1}|\boldsymbol{x}_0)
$$
</div>
<p>ä¸è¿‡ç›´æ¥å¥—ï¼Œè¿˜æ˜¯æœ‰ä¸€äº›å¿ƒç†éšœç¢ï¼Œå› ä¸ºè¿™ä¸ª $x_0$ æ‘†åœ¨ä¸Šé¢çœ‹ç€å®åœ¨æ†‹å±ˆï¼Œæ²¡æ³•ç›´æ¥å¯¹åº”è¿‡æ¥ã€‚ç›´è§‰ä¸Šï¼ŒæŠŠ $x_0$ ç›´æ¥å»æ‰ç­‰å¼åº”è¯¥ä¹Ÿæ˜¯æˆç«‹çš„ï¼Œä¸è¿‡æˆ‘ä¸çŸ¥é“è¿™ç§åšæ³•çš„å‡ºå¤„æ˜¯ä»€ä¹ˆï¼Œå¦‚æœæœ‰ä½¬çŸ¥é“ï¼Œè¿˜è¯·éº»çƒ¦ç•™ä¸ªè¨€ï¼Œä¸èƒœæ„Ÿæ¿€ã€‚</p>
<p>å½“æˆ‘ä»¬å»æ‰$x_0$ä¹‹åï¼Œé‚£å°±ç®€å•äº†ï¼ˆç¬¬ä¸€ä¸ªç­‰å·åˆ©ç”¨äº†å…¨æ¦‚ç‡å…¬å¼ï¼‰</p>
<div>
$$
\int p(\boldsymbol{x}_{t-1}|\boldsymbol{x}_t) p(\boldsymbol{x}_t) d\boldsymbol{x}_t = p(\boldsymbol{x}_{t-1}) = p(\boldsymbol{x}_{t-1})
$$
</div>
<p>è¿˜åŸå›æ¥</p>
<div>
$$
\int p(\boldsymbol{x}_{t-1}|\boldsymbol{x}_t, \boldsymbol{x}_0) p(\boldsymbol{x}_t| \boldsymbol{x}_0) d\boldsymbol{x}_t = p(\boldsymbol{x}_{t-1}| \boldsymbol{x}_0) = p(\boldsymbol{x}_{t-1}|\boldsymbol{x}_0)
$$
</div>
<p>ç»“åˆ Bishop(2006) 2.115ï¼Œä»¥åŠ</p>
<blockquote class="book-hint info">
  <div>
$$
p(\boldsymbol{x}_{t-1}|\boldsymbol{x}_t, \boldsymbol{x}_0) = \mathcal{N}(\boldsymbol{x}_{t-1}; \kappa_t \boldsymbol{x}_t + \lambda_t \boldsymbol{x}_0, \sigma_t^2 \boldsymbol{I})
$$
</div>
<div>
$$
p(\boldsymbol{x}_{t}|\boldsymbol{x}_0) = \mathcal{N}(\sqrt{\alpha_{t}}x_0, (1-\alpha_{t}) \boldsymbol{I}) 
$$
</div>
<p>å…¶ä¸­ $A = \kappa_t$, $b=\lambda_t x_0$, $\mu=\sqrt{\alpha_{t}}x_0$
</blockquote>

<p>æˆ‘ä»¬å¯ä»¥æ¨å¯¼å‡ºç­‰å¼å·¦è¾¹ï¼Œä¹Ÿå³ $p(x_{t-1}|x_0)$ çš„å‡å€¼ä¸º:</p>
<div>
$$
A\mu + b = \kappa_t \sqrt{\alpha_{t}}x_0 + \lambda_t x_0
$$
</div>
<p>æ–¹å·®ä¸º:</p>
<div>
$$
\mathbf{L}^{-1}+\mathbf{A} \mathbf{\Lambda}^{-1} \mathbf{A}^{\mathrm{T}} = \sigma^2_t \boldsymbol{I} + \kappa_t  (1-\alpha_{t}) \boldsymbol{I} \kappa_t^T
$$
</div>
<p>è®²äº†åŠå¤©ç»ˆäºæŠŠç­‰å¼ä¸¤è¾¹éƒ½æ±‚å‡ºæ¥äº†ï¼Œè¿™ä¸‹å¯ä»¥åˆ—æ–¹ç¨‹æ±‚è§£äº†ï¼Œå›é¡¾ç­‰å¼å³è¾¹æ˜¯ $p(x_{t-1}|x_0) = N(\sqrt{\alpha_{t-1}}x_0, (1-\alpha_{t-1}) I)$ï¼Œé‚£ä¹ˆæˆ‘ä»¬æœ‰ä¸¤ä¸ªæ–¹ç¨‹ï¼š</p>
<div>
$$
\sqrt{\alpha_{t-1}}x_0 = \kappa_t \sqrt{\alpha_{t}}x_0 + \lambda_t x_0
$$
</div>
<div>
$$
(1-\alpha_{t-1}) \boldsymbol{I} = \sigma^2_t \boldsymbol{I} + \kappa_t  (1-\alpha_{t}) \boldsymbol{I} \kappa_t^T
$$
</div>
<p>ç”±ç¬¬äºŒä¸ªæ–¹ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥è§£å‡º:</p>
<div>
$$
\kappa_t = \sqrt{\frac{1-\alpha_{t-1} - \sigma^2_t}{1-\alpha_{t}}} 
$$
</div>
<p>ç»“åˆä¸Šè¿°ç»“æœå’Œç¬¬ä¸€ä¸ªæ–¹ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥è§£å‡ºï¼š</p>
<div>
$$
 \lambda_t =  \sqrt{\alpha_{t-1}} - \sqrt{\frac{1-\alpha_{t-1} - \sigma^2_t}{1-\alpha_{t}}}  \sqrt{\alpha_{t}}
$$
</div>
<p>ä»£å›</p>
<div>
$$
p(\boldsymbol{x}_{t-1}|\boldsymbol{x}_t, \boldsymbol{x}_0) = \mathcal{N}(\boldsymbol{x}_{t-1}; \kappa_t \boldsymbol{x}_t + \lambda_t \boldsymbol{x}_0, \sigma_t^2 \boldsymbol{I})
$$
</div>
<p>æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°</p>
<div>
\begin{aligned}
p(\boldsymbol{x}_{t-1}|\boldsymbol{x}_t, \boldsymbol{x}_0) &= \mathcal{N}(\boldsymbol{x}_{t-1};  \kappa_t  \boldsymbol{x}_t + (\sqrt{\alpha_{t-1}}- \kappa_t \sqrt{\alpha_{t}}) \boldsymbol{x}_0, \sigma_t^2 \boldsymbol{I}) \\
&=\mathcal{N}(\boldsymbol{x}_{t-1}; \sqrt{\alpha_{t-1}}  \boldsymbol{x}_0 +  \kappa_t (\boldsymbol{x}_t - \sqrt{\alpha_{t}} \boldsymbol{x}_0), \sigma_t^2 \boldsymbol{I}) \\ 
&=\mathcal{N}(\boldsymbol{x}_{t-1}; \sqrt{\alpha_{t-1}}  \boldsymbol{x}_0 +  \sqrt{\frac{1-\alpha_{t-1} - \sigma^2_t}{1-\alpha_{t}}} (\boldsymbol{x}_t - \sqrt{\alpha_{t}} \boldsymbol{x}_0), \sigma_t^2 \boldsymbol{I}) 
\end{aligned}
</div>
<p>ğŸ¤— è‡³æ­¤æˆ‘ä»¬å°±å¾—åˆ°äº† DDIM è®ºæ–‡é‡Œçš„ç›´æ¥ç»™å‡ºçš„å…¬å¼ 7 äº†ã€‚</p>
<h2 id="ddim-è®ºæ–‡çš„ä¸€äº›-typo">
  DDIM è®ºæ–‡çš„ä¸€äº› typo
  <a class="anchor" href="#ddim-%e8%ae%ba%e6%96%87%e7%9a%84%e4%b8%80%e4%ba%9b-typo">#</a>
</h2>
<p>é™„å½• B é‡Œçš„å…¬å¼ 22 å’Œ 23 åº”è¯¥æ˜¯æ‰“é”™äº†, æ–¹å·®ä¸åº”è¯¥å¸¦æ ¹å·ï¼ŒåŸè®ºæ–‡å¤šäº†ä¸ªæ ¹å·ï¼Œåº”è¯¥æ˜¯ä¸‹é¢è¿™ä¸ªå…¬å¼</p>
<div>
$$
p(x_{t}|x_0) = N(\sqrt{\alpha_{t}}x_0, (1-\alpha_{t}) I)
$$
</div>
<h2 id="ddim-é‡‡æ ·">
  DDIM é‡‡æ ·
  <a class="anchor" href="#ddim-%e9%87%87%e6%a0%b7">#</a>
</h2>
<p>åŸºäºæ¨å¯¼å‡ºæ¥çš„ $p(x_{t-1}|x_t, x_0)$ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“å†™å‡ºä¸‹é¢çš„é‡‡æ ·å…¬å¼ï¼ˆåˆ©ç”¨é‡å‚æ•°åŒ–æŠ€å·§ï¼‰ï¼š</p>
<div>
$$
x_{t-1} = \sqrt{\alpha_{t-1}}  \boldsymbol{x}_0 +  \sqrt{\frac{1-\alpha_{t-1} - \sigma^2_t}{1-\alpha_{t}}} (\boldsymbol{x}_t - \sqrt{\alpha_{t}} \boldsymbol{x}_0) + \sigma_t^2 \epsilon_t
$$
</div>
<p>ç„¶åï¼Œæˆ‘ä»¬éœ€è¦ç”¨ç½‘ç»œé¢„æµ‹çš„ $x_0$ æ›¿ä»£ä¸Šé¢çš„ $x_0$ã€‚å¯¹äº epsilon å‚æ•°åŒ–çš„ç½‘ç»œ $ \epsilon_{\theta}^{(t)}$ï¼Œå³ç½‘ç»œé¢„æµ‹çš„æ˜¯</p>
<div>
$$
x_t = \sqrt{\alpha_{t}}x_0 + \sqrt{(1-\alpha_{t})} \epsilon_{\theta}^{(t)}(x_t)
$$
</div>
<p>æˆ‘ä»¬æœ‰</p>
<div>
$$
x_0 = \frac{x_t - \sqrt{(1-\alpha_{t})} \epsilon_{\theta}^{(t)}(x_t)}{\sqrt{\alpha_{t}}}
$$
</div>
<p>æŠŠè¿™ä¸ªå¼å­å¾€å›ä»£ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†æœ€ç»ˆçš„é‡‡æ ·å…¬å¼ï¼ˆå¯¹åº”åŸè®ºæ–‡çš„å…¬å¼ 12ï¼‰</p>
<div>
$$
    \boldsymbol{x}_{t-1}=\sqrt{\alpha_{t-1}} \underbrace{\left(\frac{\boldsymbol{x}_{t}-\sqrt{1-\alpha_{t}} \epsilon_{\theta}^{(t)}\left(\boldsymbol{x}_{t}\right)}{\sqrt{\alpha_{t}}}\right)}_{\text {"predicted } \boldsymbol{x}_{0} "}+\underbrace{\sqrt{1-\alpha_{t-1}-\sigma_{t}^{2}} \cdot \epsilon_{\theta}^{(t)}\left(\boldsymbol{x}_{t}\right)}_{\text {"direction pointing to } \boldsymbol{x}_{t} \text { " }}+\underbrace{\sigma_{t} \epsilon_{t}}_{\text {random noise }}
$$
</div>
<h2 id="å¿«é€Ÿé‡‡æ ·">
  å¿«é€Ÿé‡‡æ ·
  <a class="anchor" href="#%e5%bf%ab%e9%80%9f%e9%87%87%e6%a0%b7">#</a>
</h2>
<p>äº‹å®ä¸Šï¼ŒDDIM æœ¬èº«å¹¶ä¸èƒ½å¸¦æ¥åŠ é€Ÿæ•ˆæœï¼ŒDDIM å¿«é€Ÿé‡‡æ ·çš„åŸç†æœ¬è´¨ä¸Šå°±æ˜¯ Stride Samplingï¼Œå³é—´éš”é‡‡æ ·ã€‚è€Œé—´éš”é‡‡æ ·çš„åŸºçŸ³åˆ™æ˜¯</p>
<blockquote>
<p>DDPMçš„è®­ç»ƒç»“æœå®è´¨ä¸ŠåŒ…å«äº†å®ƒçš„ä»»æ„å­åºåˆ—å‚æ•°çš„è®­ç»ƒç»“æœã€‚</p>
</blockquote>
<p>å…·ä½“åœ°ï¼ŒDDPM çš„è®­ç»ƒè¿‡ç¨‹å¯ä»¥ç”¨ä¸€ä¸ª $\alpha_t$ çš„åºåˆ—å®šä¹‰ï¼Œæ¯ä¸ª step éƒ½æ˜¯éšæœºé‡‡æ ·ä¸€ä¸ª $\alpha_t$ å¯¹æ ·æœ¬è¿›è¡ŒåŠ å™ªï¼Œç„¶åè®­ç»ƒä¸€ä¸ªå»å™ªæ¨¡å‹é¢„æµ‹å™ªå£°ã€‚åœ¨è®­ç»ƒé˜¶æ®µï¼Œt æœ€å¤§å–å€¼ä¸º Tï¼Œä¸€èˆ¬ä¸º 1000ã€‚
æœ´ç´ çš„é‡‡æ ·æ–¹å¼æ˜¯ 1000,999,998,997 ä¸€æ­¥ä¸€æ­¥é‡‡æ ·ã€‚</p>
<p>é—´éš”é‡‡æ ·åˆ™æ˜¯å–1000,980,960,940 ä¸€æ­¥ä¸€æ­¥é‡‡æ ·ï¼ˆé‡‡æ ·æ€»æ­¥æ•°ä¸º 50ï¼‰ã€‚</p>
<h2 id="è®¨è®º">
  è®¨è®º
  <a class="anchor" href="#%e8%ae%a8%e8%ae%ba">#</a>
</h2>
<p>äº‹å®ä¸Šï¼Œé€šè¿‡ DDIM çš„æ¨å¯¼ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªæ›´åŠ  general çš„é‡‡æ ·è¿‡ç¨‹ $q(x_{t-1}|x_t, x_0)$ï¼Œè¿™ä¸ªé‡‡æ ·è¿‡ç¨‹åŒ…å«ä¸€ä¸ªå¯ä»¥è°ƒèŠ‚çš„å‚æ•° $\sigma_t$ï¼Œé€šè¿‡é€‰å–çš„ä¸åŒçš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ç°‡ä¸åŒçš„é‡‡æ ·è¿‡ç¨‹ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœé€‰å– $\sigma_t = 0$ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¾—äº†ä¸€ä¸ªç¡®å®šæ€§çš„é‡‡æ ·è¿‡ç¨‹ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€‰å–ä¸€ä¸ªç‰¹æ®Šçš„ $\sigma_t$ å¾—åˆ° DDPM çš„ $q(x_{t-1}|x_t, x_0)$ï¼Œä¹Ÿå°±æ˜¯è¯´ DDPM æ˜¯ DDIM çš„ä¸€ä¸ªç‰¹ä¾‹ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸ªä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨æ¨å¯¼çš„æ—¶å€™æ˜¯æ ¹æ® DDPM çš„å½¢å¼ï¼Œæ’°å†™äº†ä¸€ä¸ªæ›´ general çš„è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆæ¨å¯¼å‡ºæ¥å¿…ç„¶æœ‰è¿™ä¸ªç»“æœã€‚</p>
<p><strong>é‚£ä¹ˆæ€ä¹ˆé€‰å–$\sigma_t$æ‰èƒ½è·å¾—æœ€ä½³çš„åŠ é€Ÿæ•ˆæœå‘¢ï¼Ÿ</strong></p>
<p>ä¸ºæ­¤ï¼Œä½œè€…åšäº†ä¸€äº›å®éªŒï¼Œä½œè€…é€‰å–çš„$\sigma_t$ä¸ºï¼Œé€šè¿‡æ§åˆ¶$\eta$å¯ä»¥æ§åˆ¶å…¶å¤§å°ã€‚</p>
<div>
$$
\sigma_{\tau_i}(\eta)=\eta \sqrt{\left(1-\alpha_{\tau_{i-1}}\right) /\left(1-\alpha_{\tau_i}\right)} \sqrt{1-\alpha_{\tau_i} / \alpha_{\tau_{i-1}}}
$$
</div>
<p>äº‹å®ä¸Šï¼Œå½“$\eta=1$ çš„æ—¶å€™æˆ‘ä»¬å°±å˜æˆ DDPM äº†ï¼Œè¿™ä¹Ÿå¯¹åº”ä¸Šæˆ‘ä»¬åˆšåˆšæåˆ°çš„ç‰¹æ®Šçš„ $\sigma_t$ã€‚</p>
<figure><img src="image-1.png"/>
</figure>

<p>å¯ä»¥çœ‹åˆ°å½“ $\eta = 0$ çš„æ—¶å€™ï¼Œå¿«é€Ÿé‡‡æ ·æ•ˆæœæ˜¯æœ€å¥½çš„ã€‚</p>
<p><strong>ä¸€ä¸ªæœ‰è¶£çš„æ€§è´¨</strong></p>
<p>å¯¹äºåŠ å™ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬æœ‰</p>
<div>
$$
x_t = \sqrt{\alpha_{t}}x_0 + \sqrt{(1-\alpha_{t})} \epsilon_{\theta}^{(t)}(x_t)
$$
</div>
<div>
$$
x_{t-1} = \sqrt{\alpha_{t-1}}x_0 + \sqrt{(1-\alpha_{t-1})} \epsilon_{\theta}^{(t-1)}(x_{t-1})
$$
</div>
<p>è€Œå½“ $\sigma_t = 0$ æ—¶ï¼Œæˆ‘ä»¬æœ‰</p>
<div>
$$
x_{t-1} = \sqrt{\alpha_{t-1}}x_0 + \sqrt{(1-\alpha_{t-1})} \epsilon_{\theta}^{(t)}(x_t)
$$
</div>
<p>æ‰€ä»¥å¯ä»¥çœ‹å‡º DDIM  $\eta = 0$ å®é™…ä¸Šç”¨ $\epsilon_{\theta}^{(t)}(x_t)$ å»è¿‘ä¼¼ $\epsilon_{\theta}^{(t-1)}(x_{t-1})$ ã€‚ä¸è¿‡å› ä¸º $x_0$ ä¹Ÿæ˜¯é¢„æµ‹å‡ºæ¥çš„ï¼Œæ‰€ä»¥è¿™é‡Œé¢è¿˜ä¼šæœ‰ä¸€ä¸ªè¯¯å·®ã€‚</p>
<p>è¿›ä¸€æ­¥æ€è€ƒï¼ŒDDIM çš„æ€§èƒ½åº”è¯¥å–å†³äºç›¸é‚»ä¸¤ä¸ªæ—¶é—´æ­¥é¢„æµ‹ç»“æœçš„ä¸€è‡´æ€§ï¼Œè¿™ä¹Ÿæ„å‘³ç€ï¼Œå¦‚æœæˆ‘ä»¬ç”¨ç›¸é‚»æ­¥æ•°çš„ç»“æœå» finetune ä¸€ä¸‹ SDï¼Œå³ç”¨å™ªå£°å°çš„ï¼Œä¹Ÿå°±æ˜¯ t æ›´å°çš„æ­¥æ•°å»ç›‘ç£ t+1 æ­¥ï¼Œè¿™æ ·åº”è¯¥å¯ä»¥è®©æ€§èƒ½æ›´å¥½ã€‚å¾ˆå¥½ï¼Œç„¶åæˆ‘ä»¬å°±å¾—åˆ°äº† Consistency Modelï¼Ÿ</p>
<!-- **æ€ä¹ˆç†è§£ DDIM çš„ Consistency æ¥æºï¼Ÿ**

> Consistency: If we start with the same initial latent variable and generate several samples with Markov chains of various lengths, these samples would have similar high-level features.

Consistency æ„å‘³ç€è¿­ä»£ä¸åŒæ€»æ­¥æ•°ï¼Œç»“æœç±»ä¼¼ã€‚ --><blockquote>
</blockquote></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">


  <div><a class="flex align-center" href="https://github.com/Zeqiang-Lai/blog/commit/a217f991544936b4263d74cbff8e8f663e295991" title='æœ€åä¿®æ”¹è€… Zeqiang Lai | November 6, 2023' target="_blank" rel="noopener">
      <img src="/blog/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>November 6, 2023</span>
    </a>
  </div>




</div>



  <script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>


 
        <script>
    MathJax = {
      svg: {
            fontCache: 'global'
      },
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$','$$'], ['\\[', '\\]']],
        processEscapes: true,
        processEnvironments: true,
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      },
    };
  
    window.addEventListener('load', (event) => {
        document.querySelectorAll("mjx-container").forEach(function(x){
          x.parentElement.classList += 'has-jax'})
      });
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>

<script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
      </footer>

      
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#å†™åœ¨å‰é¢">å†™åœ¨å‰é¢</a></li>
        <li><a href="#ddim-å‡ºå‘ç‚¹">DDIM å‡ºå‘ç‚¹</a></li>
        <li><a href="#ddim-æ¨å¯¼">DDIM æ¨å¯¼</a></li>
        <li><a href="#ddim-è®ºæ–‡çš„ä¸€äº›-typo">DDIM è®ºæ–‡çš„ä¸€äº› typo</a></li>
        <li><a href="#ddim-é‡‡æ ·">DDIM é‡‡æ ·</a></li>
        <li><a href="#å¿«é€Ÿé‡‡æ ·">å¿«é€Ÿé‡‡æ ·</a></li>
        <li><a href="#è®¨è®º">è®¨è®º</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  <script async="async">
    var html = document.documentElement;
    var switcher = document.getElementsByClassName('js-toggle')[0];
    if(typeof(Storage) !== 'undefined') {
        if (localStorage.getItem('themeMode') == 'dark' || document.documentElement.getAttribute('data-theme') == 'dark') {
            switcher.classList.add('js-toggle--checked');
        }
        switcher.classList.add('js-toggle--focus');
    }
    
    switcher.addEventListener("click", function() {
            this.classList.toggle('js-toggle--checked');
            this.classList.add('js-toggle--focus');
            
            if (this.classList.contains('js-toggle--checked')) {
                html.setAttribute("data-theme","dark");
                
                localStorage.setItem('themeMode', 'dark');
            } else {
                html.setAttribute("data-theme","light");
                localStorage.setItem('themeMode', 'light');
            }
        })
</script>


</body>
</html>












